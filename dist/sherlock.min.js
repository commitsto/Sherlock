(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";var _sherlock=_interopRequireDefault(require("../src/sherlock")),_watson=_interopRequireDefault(require("../src/watson"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}window.Sherlock=new _sherlock.default,window.Watson=_watson.default;

},{"../src/sherlock":2,"../src/watson":3}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _watson=_interopRequireDefault(require("./watson"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,a[t])})}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var Sherlock=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).config,a=void 0===t?{}:t;_classCallCheck(this,e),this.config(a),this.logger.debug("new Sherlock!",this)}return _createClass(e,[{key:"config",value:function(e){if("object"===_typeof(e)){var t=e.currentTime,a=void 0===t?new Date:t,n=e.debug,r=void 0!==n&&n,s=e.disableRanges,i=void 0!==s&&s,o=e.patterns,l=void 0===o?{}:o;this._config=_objectSpread({},this._config,{currentTime:a,debug:r,disableRanges:i,logger:_watson.default.log(r),patterns:0!==Object.keys(l).length?l:_watson.default.patterns}),this.logger=this._config.logger}return this.logger.debug("Sherlock config",this._config),this._config}},{key:"_setNow",value:function(e){this._config.currentTime=e}},{key:"getNow",value:function(){return new Date(this._config.currentTime.getTime())}},{key:"matchTime",value:function(e,t,a){var n,r,s,i,o=0,l=!1,u=this._config.patterns;if(n=e.match(new RegExp(u.explicitTime.source,"g")))if((n=n.sort(function(e,t){var a=e.trim().length,n=t.trim().length;return e.match(/(?:a|p).?m.?/)&&(a+=20),t.match(/(?:a|p).?m.?/)&&(n+=20),n-a})[0].trim()).length<=2&&e.trim().length>2)o=0;else{o=n.length,n=n.match(u.explicitTime);var c=parseInt(n[1]),h=n[2]||0,g=n[3];g?(0===g.indexOf("p")&&12!=c?c+=12:0===g.indexOf("a")&&12==c&&(c=0),o+=20):c<12&&(c<7||c<=t.getHours())&&(c+=12),r=c,s=h,i=!!g,l=n[0]}var f=function(){return l&&(t.setHours(r,s,0),t.hasMeridian=i),l};if(!(o<4))return f();if(n=e.match(u.inRelativeTime))switch(isNaN(n[1])&&(n[1]=1),n[3]&&(n[1]=-1*parseInt(n[1])),n[2].substring(0,1)){case"h":return t.setHours(t.getHours()+parseInt(n[1])),n[0];case"m":return t.setMinutes(t.getMinutes()+parseInt(n[1])),n[0];default:return f()}else if(n=e.match(u.inMilliTime))switch(n[3]&&(n[1]=-1*parseInt(n[1])),n[2].substring(0,1)){case"s":return t.setSeconds(t.getSeconds()+parseInt(n[1])),n[0];case"m":return t.setMilliseconds(t.getMilliseconds()+parseInt(n[1])),n[0];default:return f()}else{if(!(n=e.match(u.midtime)))return(n=e.match(u.internationalTime))?(t.setHours(n[1],n[2],0),t.hasMeridian=!0,n[0]):f();switch(n[1]){case"dawn":return t.setHours(5,0,0),t.hasMeridian=!0,n[0];case"morn":case"morning":return t.setHours(8,0,0),t.hasMeridian=!0,n[0];case"noon":return t.setHours(12,0,0),t.hasMeridian=!0,n[0];case"afternoon":return t.setHours(14,0,0),t.hasMeridian=!0,n[0];case"evening":return t.setHours(19,0,0),t.hasMeridian=!0,n[0];case"night":return t.setHours(21,0,0),t.hasMeridian=!0,n[0];case"midnight":return t.setHours(0,0,0),t.hasMeridian=!0,n[0];default:return f()}}}},{key:"matchDate",value:function(e,t,a){this.logger.debug("matchDate",t,e);var n,r=this._config.patterns;if(n=e.match(r.monthDay))return n[3]?(t.setFullYear(n[3],_watson.default.changeMonth(n[1]),n[2]),t.hasYear=!0):t.setMonth(_watson.default.changeMonth(n[1]),n[2]),n[0];if(n=e.match(r.dayMonth))return n[3]?(t.setFullYear(n[3],_watson.default.changeMonth(n[2]),n[1]),t.hasYear=!0):t.setMonth(_watson.default.changeMonth(n[2]),n[1]),n[0];if(n=e.match(r.shortForm)){var s=n[3],i=null;return s&&(i=parseInt(s)),i&&s.length<4&&(i+=i>50?1900:2e3),i?(t.setFullYear(i,n[1]-1,n[2]),t.hasYear=!0):t.setMonth(n[1]-1,n[2]),n[0]}if(n=e.match(r.oxtDays)||e.match(r.oxtDaysUK))switch(this.logger.debug("HERE!",r.oxtDays,t,n),n[1].substr(0,3)){case"sun":return _watson.default.changeDay(t,0,"oxt"),n[0];case"mon":return _watson.default.changeDay(t,1,"oxt"),n[0];case"tue":return _watson.default.changeDay(t,2,"oxt"),n[0];case"wed":return _watson.default.changeDay(t,3,"oxt"),n[0];case"thu":return _watson.default.changeDay(t,4,"oxt"),n[0];case"fri":return _watson.default.changeDay(t,5,"oxt"),n[0];case"sat":return _watson.default.changeDay(t,6,"oxt"),n[0];default:return!1}else{if(!(n=e.match(r.weekdays))){if(n=e.match(r.inRelativeDateFromRelativeDate))return!(!_watson.default.relativeDateMatcher(n[4],t,this.getNow())||!_watson.default.inRelativeDateMatcher(n[1],n[2],n[3],t))&&n[0];if(n=e.match(r.relativeDate))return!!_watson.default.relativeDateMatcher(n[1],t,this.getNow())&&n[0];if(n=e.match(r.inRelativeDate))return!!_watson.default.inRelativeDateMatcher(n[1],n[2],n[3],t)&&n[0];if(n=e.match(new RegExp(r.days,"g"))){if(0!==(n=n.sort(function(e,t){return t.trim().length-e.trim().length})[0].trim()).indexOf("on")&&(0!==n.indexOf("the")||-1===n.indexOf(",",n.length-1))&&-1===e.indexOf(n,e.length-n.length-1)||(!a||!a.isAllDay)&&n.length<=2)return!1;n=n.match(r.daysOnly);var o=t.getMonth(),l=n[1];return l<t.getDate()&&o++,t.setMonth(o,l),n[0]}return!1}switch(n[2].substr(0,3)){case"sun":return _watson.default.changeDay(t,0,n[1]),n[0];case"mon":return _watson.default.changeDay(t,1,n[1]),n[0];case"tue":return _watson.default.changeDay(t,2,n[1]),n[0];case"wed":return _watson.default.changeDay(t,3,n[1]),n[0];case"thu":return _watson.default.changeDay(t,4,n[1]),n[0];case"fri":return _watson.default.changeDay(t,5,n[1]),n[0];case"sat":return _watson.default.changeDay(t,6,n[1]),n[0];default:return!1}}}},{key:"makeAdjustments",value:function(e,t,a,n,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.getNow(),i=this._config.patterns;t?e>t&&t>s&&_watson.default.isSameDay(e,t)&&_watson.default.isSameDay(e,s)?e.hasMeridian?e.setDate(e.getDate()-1):(e.setHours(e.getHours()-12),e>t&&e.setHours(e.getHours()-12)):e>t?t.setDate(e.getDate()+1):t<s&&-1===n.indexOf(" was ")&&_watson.default.monthDiff(t,s)>=3&&!t.hasYear&&!e.hasYear&&(t.setFullYear(t.getFullYear()+1),e.setFullYear(e.getFullYear()+1)):e&&(this.logger.debug('makeAdjustments to "start"',e,s),e<=s&&!e.hasYear&&!n.match(/was|ago|old\b/)&&(_watson.default.isSameDay(e,s)&&!a?e.hasMeridian||e.getHours()<19?e.setDate(e.getDate()+1):(e.setHours(e.getHours()+12),e<=s&&(e.setHours(e.getHours()-12),e.setDate(e.getDate()+1))):_watson.default.monthDiff(e,s)>=3&&e.setFullYear(e.getFullYear()+1)),r.eventTitle.match(i.more_than_comparator)?(e<=s&&(!_watson.default.isSameDay(e,s)||n.match(/ago|old\b/))&&!r.eventTitle.match(/after|newer/i)||r.eventTitle.match(/older|before/i)?(r.endDate=new Date(e.getTime()),r.startDate=new Date(1900,0,1,0,0,0,0)):r.endDate=new Date(3e3,0,1,0,0,0,0),r.eventTitle=r.eventTitle.replace(i.more_than_comparator,"")):r.eventTitle.match(i.less_than_comparator)&&(e<=s?_watson.default.isSameDay(e,s)&&!n.match(/ago|old\b/)?(r.endDate=new Date(e.getTime()),r.startDate=new Date(1900,0,1,0,0,0,0)):r.endDate=new Date(s.getTime()):(r.endDate=new Date(e.getTime()),r.startDate=new Date(s.getTime())),r.eventTitle=r.eventTitle.replace(i.less_than_comparator,""))),this.logger.debug("end making adjustments",r)}},{key:"parser",value:function(e,t,a){var n,r={},s=!1,i=_watson.default.strToNum(e);return this.logger.debug("time before",t),(s=this.matchDate(i,t,a))&&(i=i.replace(new RegExp(s),""),e=e.replace(new RegExp(_watson.default.numToStr(s)),"$DATE$")),this.logger.debug("time after",t),(n=this.matchTime(i,t,a))&&(e=e.replace(new RegExp(_watson.default.numToStr(n)),"$TIME$")),r.eventTitle=e,r.isAllDay=!(!s||n||s.match(/^(?:right )?now$|^tonight$/)),r.isValidDate=!(!s&&!n),r}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this._config.patterns;this.logger.debug("parse",e,t),null===e&&(e="");var n,r=this.getNow(),s=e,i={},o=t.disableRanges?[s.toLowerCase()]:s.toLowerCase().split(a.rangeSplitters);for(a.rangeSplitters.lastIndex=0,r.setMilliseconds(0);!i.startDate&&(null!==(n=this.parser(o[0],r,null))&&(this.logger.debug("parser result",n,r),n.isAllDay&&r.setHours(0,0,0),i.isAllDay=n.isAllDay,i.eventTitle=n.eventTitle,i.startDate=n.isValidDate?r:null),!i.startDate&&o.length>=3);){for(var l=[o[0]+o[1]+o[2]],u=3;u<o.length;u++)l.push(o[u]);o=l}for(;!i.endDate;)if(o.length>1&&(r=new Date(r.getTime()),null!==(n=this.parser(o[2],r,i))&&(i.isAllDay&&r.setHours(0,0,0),n.eventTitle.replace(/\$(?:DATE|TIME)\$/g,"").length>i.eventTitle.replace(/\$(?:DATE|TIME)\$/g,"").length&&(i.eventTitle=n.eventTitle),i.endDate=n.isValidDate?r:null)),!i.endDate){if(!(o.length>=4)){i.endDate=null;break}for(l=[o[0],o[1],o[2]+o[3]+o[4]],u=5;u<o.length;u++)l.push(o[u]);o=l}if(this.makeAdjustments(i.startDate,i.endDate,i.isAllDay,s,i),i.eventTitle){i.eventTitle=i.eventTitle.replace(/\$(?:DATE|TIME)\$/g,"");var c=t.disableRanges?a.fillerWords2:a.fillerWords;i.eventTitle=i.eventTitle.split(c)[0].trim(),i.eventTitle=i.eventTitle.replace(/(?:^| )(?:\.|-$|by$|in$|at$|from$|on$|starts?$|for$|(?:un)?till?$|!|,|;)+/g,"").replace(/ +/g," ").trim();var h=s.match(new RegExp(_watson.default.escapeRegExp(i.eventTitle),"i"));h&&(i.eventTitle=h[0].replace(/ +/g," ").trim(),""==i.eventTitle&&(i.eventTitle=null))}else i.eventTitle=null;return i}}]),e}();exports.default=Sherlock;

},{"./watson":3}],3:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var Watson=function e(){_classCallCheck(this,e)};exports.default=Watson,_defineProperty(Watson,"log",function(e){return{debug:function(){var t;return e&&(t=console).log.apply(t,arguments)},silly:function(){}}}),_defineProperty(Watson,"patterns",{rangeSplitters:/(\bto\b|\-|\b(?:un)?till?\b|\bthrough\b|\bthru\b|\band\b|\bends?\b)/g,months:"\\b(jan(?:uary)?|feb(?:ruary)?|mar(?:ch)?|apr(?:il)?|may|jun(?:e)?|jul(?:y)?|aug(?:ust)?|sep(?:tember)?|oct(?:ober)?|nov(?:ember)?|dec(?:ember)?)\\b",days:"\\b(?:(?:(?:on )?the )(?=\\d\\d?(?:st|nd|rd|th)))?([1-2]\\d|3[0-1]|0?[1-9])(?:st|nd|rd|th)?(?:,|\\b)",years:"\\b(20\\d{2}|\\d{2}[6-9]\\d)\\b",shortForm:/\b(0?[1-9]|1[0-2])\/([1-2]\d|3[0-1]|0?[1-9])\/?(\d{2,4})?\b/,weekdaysStr:"\\b(sun|mon|tue(?:s)?|wed(?:nes)?|thu(?:rs?)?|fri|sat(?:ur)?)(?:day)?\\b",relativeDateStr:"((?:next|last|this) (?:week|month|year)|tom(?:orrow)?|tmrw|tod(?:ay)?|(?:right )?now|tonight|day after (?:tom(?:orrow)?|tmrw)|yest(?:erday)?|day before yest(?:erday)?)",inRelativeDateStr:"(\\d{1,4}|a) (day|week|month|year)s? ?(ago|old)?",inRelativeTime:/\b(\d{1,2} ?|a |an )(h(?:our)?|m(?:in(?:ute)?)?)s? ?(ago|old)?\b/,inMilliTime:/\b(\d+) ?(s(?:ec(?:ond)?)?|ms|millisecond)s? ?(ago|old)?\b/,midtime:/(?:@ ?)?\b(?:at )?(dawn|morn(?:ing)?|noon|afternoon|evening|night|midnight)\b/,internationalTime:/\b(?:(0[0-9]|1[3-9]|2[0-3]):?([0-5]\d))\b/,explicitTime:/(?:@ ?)?\b(?:at |from )?(1[0-2]|[1-2]?[1-9])(?::?([0-5]\d))? ?([ap]\.?m?\.?)?(?:o'clock)?\b/,more_than_comparator:/((?:more|greater|older|newer) than|after|before) \$(?:DATE|TIME)\$/i,less_than_comparator:/((?:less|fewer) than) \$(?:DATE|TIME)\$/i,fillerWords:/ (from|is|was|at|on|for|in|due(?! date)|(?:un)?till?)\b/,fillerWords2:/ (was|is|due(?! date))\b/,get monthDay(){var e=this.months,t=this.days,a=this.years;return RegExp("".concat(e," ").concat(t,"(?: ").concat(a,")?"))},get dayMonth(){var e=this.months,t=this.days,a=this.years;return RegExp("".concat(t,"(?: (?:day )?of)? ").concat(e,"(?: ").concat(a,")?"))},get daysOnly(){var e=this.days;return RegExp(e)},get digit(){return RegExp("\\b("+Watson.intToWords.join("|")+")\\b","g")},get relativeDate(){var e=this.relativeDateStr;return RegExp("\\b".concat(e,"\\b"))},get inRelativeDate(){var e=this.inRelativeDateStr;return RegExp("\\b".concat(e,"\\b"))},get inRelativeDateFromRelativeDate(){var e=this.inRelativeDateStr,t=this.relativeDateStr;return RegExp("\\b".concat(e," from ").concat(t,"\\b"))},get weekdays(){var e=this.weekdaysStr;return RegExp("(?:(next|last) (?:week (?:on )?)?)?".concat(e))},get oxtDays(){var e=this.weekdaysStr;return RegExp("(?:\\boxt|\\bweek next) ".concat(e))},get oxtDaysUK(){var e=this.weekdaysStr;return RegExp("".concat(e," week\\b"))}}),_defineProperty(Watson,"relativeDateMatcher",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;switch(e){case"next week":return t.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()+7),t.hasYear=!0,!0;case"next month":return t.setFullYear(a.getFullYear(),a.getMonth()+1,a.getDate()),t.hasYear=!0,!0;case"next year":return t.setFullYear(a.getFullYear()+1,a.getMonth(),a.getDate()),t.hasYear=!0,!0;case"last week":return t.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()-7),t.hasYear=!0,!0;case"last month":return t.setFullYear(a.getFullYear(),a.getMonth()-1,a.getDate()),t.hasYear=!0,!0;case"last year":return t.setFullYear(a.getFullYear()-1,a.getMonth(),a.getDate()),t.hasYear=!0,!0;case"tom":case"tmrw":case"tomorrow":return t.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()+1),t.hasYear=!0,!0;case"day after tom":case"day after tmrw":case"day after tomorrow":return t.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()+2),t.hasYear=!0,!0;case"this week":case"this month":case"this year":case"tod":case"today":return t.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),t.hasYear=!0,!0;case"now":case"right now":case"tonight":return t.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),t.setHours(a.getHours(),a.getMinutes(),a.getSeconds(),0),"tonight"===e&&t.getHours()<21&&t.setHours(21,0,0,0),t.hasMeridian=!0,t.hasYear=!0,!0;case"yest":case"yesterday":return t.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()-1),t.hasYear=!0,!0;case"day before yest":case"day before yesterday":return t.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()-2),t.hasYear=!0,!0;default:return!1}}),_defineProperty(Watson,"inRelativeDateMatcher",function(e,t,a,r){switch(e=isNaN(e)?1:parseInt(e,10),a&&(e*=-1),t){case"day":return r.setDate(r.getDate()+e),r.hasYear=!0,!0;case"week":return r.setDate(r.getDate()+7*e),r.hasYear=!0,!0;case"month":return r.setMonth(r.getMonth()+e),r.hasYear=!0,!0;case"year":return r.setFullYear(r.getFullYear()+e),r.hasYear=!0,!0;default:return!1}}),_defineProperty(Watson,"changeMonth",function(e){return this.monthToInt[e.substr(0,3)]}),_defineProperty(Watson,"changeDay",function(e,t,a){Watson.log().debug("changeDay",e,t,a);var r=7-e.getDay()+t;(r>7&&void 0===a||"last"===a)&&(r-=7),r>=0&&"last"===a&&(r-=7),"oxt"===a&&(r+=7);var n=e.getDate()+r;Watson.log().debug("setDate",r,n),e.setDate(n)}),_defineProperty(Watson,"monthDiff",function(e,t){var a;return a=12*(t.getFullYear()-e.getFullYear()),a-=e.getMonth()+1,(a+=t.getMonth()+1)<=0?0:a}),_defineProperty(Watson,"escapeRegExp",function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}),_defineProperty(Watson,"isSameDay",function(e,t){return e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()&&e.getFullYear()===t.getFullYear()}),_defineProperty(Watson,"monthToInt",{jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11}),_defineProperty(Watson,"wordsToInt",{one:1,first:1,two:2,second:2,three:3,third:3,four:4,fourth:4,five:5,fifth:5,six:6,sixth:6,seven:7,seventh:7,eight:8,eighth:8,nine:9,ninth:9,ten:10,tenth:10}),_defineProperty(Watson,"intToWords",["one|first","two|second","three|third","four|fourth","five|fifth","six|sixth","seven|seventh","eight|eighth","nine|ninth","ten|tenth"]),_defineProperty(Watson,"strToNum",function(e){return e.replace(Watson.patterns.digit,function(e){var t=Watson.wordsToInt[e];return-1!==e.indexOf("th",e.length-2)?t+="th":-1!==e.indexOf("st",e.length-2)?t+="st":-1!==e.indexOf("nd",e.length-2)?t+="nd":-1!==e.indexOf("rd",e.length-2)&&(t+="rd"),t})}),_defineProperty(Watson,"numToStr",function(e){return e.replace(/((?:[1-9]|10)(?:st|nd|rd|th)?)/g,function(e){return"(?:"+e+"|"+Watson.intToWords[parseInt(e,10)-1]+")"})});

},{}]},{},[1]);
